خطة ملف watcher و finalize ، اوقفناها منذ زمن ولكن ربما نعود اليها ، سنستكملها باذن الله بعد خطة التامين والدمج


التعليقات والتقييمات على المنافسة والمتنافسين تتم اثناء المنافسة وليست بعدها ، اريد ان نضمهما الى signaling اخر منفصل ولكن لنفس المنافسة

هذه الصفحات تم صنعها بعيدا تماما عن المشروع مستقلة لتجربة جانب البث وبالتالي ليس بها جلسة ولا  اي شئ ولم تكن متصلة بالمشروع حتى في رابط الغرفة كنا ننشاه عشوائيا ، والان بعد ان نجحت الاختبارات دمجنا الجزء الخاص بالاستيلات فقط ونريد حاليا استكمال الدمج وبالتالي كل خطوات انشاء الغرف والاتصال والتواصل والجلسات يجب ان يعود في حضن المشروع ، وحتى صفحة المشاهدة ستدمج في المشروع ولكن هي متاح فيها المشاهدة بلا تسجيل للدخول ، ودورك هو الان ان تجعل منصتنا تنشئ التوكن وتحدث ال signaling server بهاذا ثم ستدخل للصفحات (ولا تنسى ان بها صفحات مشتركة shared) فتدمجها في المشروع خطوة بخطوة بدون الافساد او اعادة كتابة الكود من راسك ستحصر اولا كل الدوال التي تحتاج تعديل لتندمج تماما في المشروع ثم ستبدا في ذلك ، اعلم انه عمل كبير لكن ان خططت له سينجح لاننا نظفنا هذه الملفات ونظمناها جدا بحيث لا تحتاج جهد في التعديل


الان سننتقل لنقطة جديدة وهي صفحة العرض هي حتى الان فاسدة ، وايضا صفحة المناسات تعرض بالاسلوب القديم وانا اريد ان ادمج بها نظام صفحة العرض ، ثالثا المنافسات تسجل في قاعدة البيانات بطريقة خاطئة او تعرض بطريقة خاطئة هناك شئ فاسد ، فالتي انشاها الان وهي اللاحقة تظهر وكانها مسجلة والمسجلة تظهر وكانها لايف ووتضارب وخلل فهل تستطيع اصلاحه ، لكن قبل اصلاح اي شئ سنفعل كالعادة خطة ونسخة


طيب ما هي المشكلة التي نواجهها ، اولا تطام بث اللايف هذا لا يعرف ان يتوقف بمعنى اذا المنافسة منتهية من سنة اول ما يعمل سيظن ان المنافسة لا تزال تعمل وسيستجلب القطع ، لهاذا لابد ان يرتبط بقاعدة بيانات المشروع يبحث عن اخر القطع المرفوعة ويبدا منها ، ويبحث مع كل قطعة يستجلبها ان كانت المنافسة انتهت فان انتهت يعرض اخر قطعة قام بتحميلها ويتوقف ، لا يعمل قبل ان يتاكد ان المنافسة تعمل، الامر الثاني نظام المسجل هذا فاشل جدا يحمل بضع قطع بسيطة ويعرضها وانتهي الامر ، المفترض ان يفعل التالي يحمل بيانات القطع ومجموع وقت القطع ويحمل القطعة الاولى ويبدا بعرضها ، فاذا اراد المستخدم تحريك السيكنج بار الى وقت معين في الفديو ينتقل لتحميل القطعة التي يوافق وقتها هذا التوقيت في الفديو الاجمالي ، وهو في هذا الوقت لا يزال يقوم بالتحميل القطعة التالية للتي يشاهدها المستخدم فاذا انتهت القطع يبحث عن القطع الباقية ويحملها بالترتيب من اول الفديو ، كل هذا يفعله وهو لا يحذف اي قطعة ، فاذا انتهى تماما يظهر زر دمج وتحميل الفديو للمشاهد بحيث ينزله كفديو واحد ، ويفضل لو كانت هناك طريقه لجعل متصفح المستخدم يحول الفديو الكامل من webm الى mp4


جيد ما فعلته جيد جدا ولكن به بعض الاخطاء نرجو اصلاحها اولا الكنترولر الخاصة بالفديو كلها ظاعرة بالرغم اني طلبت اخفائها ، المفترض الا يظهر سوى الكنترولرز الخاصة بنا فقط ويكون في هذا السييك بار زر ملء الشاشة لجعل الفديو يملا الشاشة ، ثايا ينبغي الا يظهر ازرار التحميل هذه الا بعد انتهاء تنزيل القطع كلها ، ثالثا الازرار الموجودة غير منطقية وذلك لانه المفترض اذا كانت المنافسة لاتزال حية فان هذه الشاشة ستكون لعرض البث الحي فقط واما ان كانت مسجلة فستكون للمسجل فقط ، رابعا ازرار الشاشة ازل منها النصوص واكتفي بالرموز فقك الا ازرار التحميل ستبقي كلمة webm و mp4 ، خامسا تحميل mp4 للفديو يفشل فما السبب ، اخيرا اضبط في قاعدة البيانات انتهاء المنافسة لانه يفترض ان تتحول المنافسة لمسجلة في احد هذه الحالات اما انتهاء الساعتين او ضغط اي من المتنافسين انهاء ، اما الات فالذي اراه انها تظل تعمل ان حاول احد بدئها من جديد او استئنافها، ايضا عدد القطع ووقتها غير  مضبوط افحص الامر واعرف اين الخلل
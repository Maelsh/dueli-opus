# سيناريوهات المستخدمين - منصة Dueli

## السيناريو 1: المستخدم الزائر (غير مسجل)

### الإمكانيات:
- ✅ تصفح المنافسات (حية ومسجلة)
- ✅ البحث عن منافسات
- ✅ البحث عن مستخدمين
- ✅ الوصول لملفات المستخدمين
- ✅ مشاهدة البث المباشر
- ❌ التعليق
- ❌ التقييم
- ❌ المراسلة
- ❌ فتح منافسة

### رحلة الزائر:
```
زيارة المنصة
    ↓
تصفح المواضيع
    ↓
مشاهدة بث مباشر
    ↓
يريد التفاعل → يُطلب منه التسجيل
    ↓
التسجيل
    ↓
مستخدم مسجل
```

---

## السيناريو 2: المستخدم المسجل

### التسجيل:
طرق التسجيل المتاحة:
- بريد إلكتروني مباشر
- حساب Google
- حساب Microsoft
- حساب Facebook

### ما يحصل بعد التسجيل:
- ✅ إنشاء ملف شخصي
- ✅ صندوق رسائل
- ✅ إشعارات
- ✅ إمكانية المراسلة
- ✅ إمكانية التعليق والتقييم
- ✅ إمكانية المتابعة
- ✅ إمكانية فتح منافسات
- ✅ إمكانية التقديم على منافسات

### رحلة المستخدم المسجل:
```
الدخول للمنصة
    ↓
يرى المنافسات المتاحة
    ├─ حية → يشاهد + يعلق + يقيّم
    ├─ قادمة → يقدم طلب انضمام
    └─ منتهية → يشاهد التسجيل + يعلق (لا - التعليقات مجمدة)
```

---

## السيناريو 3: المستخدم كـ Host (مُنشئ منافسة)

### فتح منافسة جديدة:

#### الخطوات:
1. اختيار القسم (نزاع، علم، موهبة، إلخ)
2. تحديد الموضوع
3. وضع القواعد والشروط
4. تحديد الوقت (فوري أو مُجدول)
5. نشر المنافسة

#### بعد النشر:
```
المنافسة تظهر في "القادمة"
    ↓
الخيارات المتاحة:
    ├─ انتظار طلبات المستخدمين
    │   ↓
    │   يصل طلب → إشعار للـ Host
    │   ↓
    │   Host يقبل أو يرفض أو يحذف
    │
    └─ إرسال دعوات مباشرة
        ↓
        فلترة المستخدمين
        ↓
        إرسال دعوة
        ↓
        المدعو يقبل → إشعار للـ Host
```

#### بعد القبول:
- المنافسة تتحول لـ "مقبولة"
- تحذف كل الطلبات الأخرى (سواء من Host أو من Users)
- إذا كانت مجدولة:
  - تسجل في التقويم
  - إشعار قبل البدء
- إذا كانت فورية:
  - يمكن البدء مباشرة

---

## السيناريو 4: المستخدم كـ Guest (متقدم لمنافسة)

### رحلة Guest:

```
يرى منافسة مفتوحة
    ↓
يطّلع على الشروط والقواعد
    ↓
يقرر التقديم
    ↓
يملأ طلب الانضمام
    ↓
يُرسل الطلب
    ↓
ينتظر رد Host
    ↓
    ├─ قُبل → إشعار + تسجيل في التقويم
    ├─ رُفض → إشعار
    ├─ حُذف → إشعار
    └─ قُبل شخص آخر → يُحذف تلقائياً
```

### إمكانيات Guest:
- ✅ حذف طلبه في أي وقت قبل القبول
- ✅ مراسلة الـ Host قبل التقديم
- ❌ تعديل شروط المنافسة (المنشئ فقط يحددها)

---

## السيناريو 5: أثناء البث المباشر

### للمتنافسين (Host & Guest):
```
الوقت المحدد يبدأ
    ↓
Host يضغط "بدء البث"
    ↓
البث يبدأ (WebRTC)
    ↓
المنافسة تصبح "Live"
    ↓
الكاميرات والميكروفونات شغالة
    ↓
النقاش يبدأ
```

#### إمكانيات المتنافسين:
- ✅ التحدث والظهور
- ✅ رؤية التعليقات المباشرة
- ✅ رؤية مؤشر التقييم اللحظي
- ❌ لا يمكن تقييم نفسه

#### حالات الطوارئ:
- **انقطاع أحد المتنافسين:**
  - الطرف الآخر يستمر
  - انتظار عودة المنقطع
  - إذا انتهى وقت المنافسة (أقصى ساعتين) → تنتهي تلقائياً
  
- **ضغط "إنهاء":**
  - البث يتوقف
  - المنافسة تتحول لـ "Completed"
  
- **عدم حضور أي متنافس:**
  - المنافسة تنتهي تلقائياً
  - لا عقوبات أو تقييم سلبي

### للمشاهدين (Viewers):

```
يدخل البث المباشر
    ↓
يشاهد
    ↓
الخيارات المتاحة:
    ├─ التعليق المباشر
    ├─ التقييم اللحظي (0-100 نقطة لكل متنافس)
    └─ تعديل التقييم (طالما البث شغال)
```

#### نظام التقييم أثناء البث:
- كل مشاهد له تقييم مستقل
- المدى: 0-100 نقطة لكل متنافس
- كل نجمة = 20 نقطة (5 نجوم = 100)
- يمكن:
  - إعطاء 0 للاثنين
  - إعطاء 100 للاثنين
  - أي توزيع بينهما
- تعديل التقييم متاح طوال البث
- **مؤشر live** يظهر للجميع:
  - إجمالي النقاط لكل متنافس
  - تحديث مباشر

---

## السيناريو 6: بعد انتهاء البث

### ما يحصل تلقائياً:
```
البث ينتهي
    ↓
التقييم يتوقف (لا مزيد من التعديل)
    ↓
حساب النتائج:
    ├─ إجمالي نقاط المتنافس أ
    ├─ إجمالي نقاط المتنافس ب
    └─ النسبة = (نقاط أ) ÷ (نقاط أ + نقاط ب)
    ↓
التسجيل يبدأ
    ↓
المنافسة تتحول لـ "Archived"
    ↓
التعليقات تُجمّد (تظهر مع الفيديو بنفس التوقيت)
    ↓
الإعلانات تبدأ في العرض على الأرشيف
    ↓
حساب الأرباح
```

### توزيع الأرباح:
```
إجمالي إيرادات الإعلانات = 100%
    ↓
20% للمنصة (إدارة + تطوير)
    ↓
80% للمتنافسين:
    ├─ المتنافس أ: (نسبة نقاطه × 80%)
    └─ المتنافس ب: (نسبة نقاطه × 80%)
```

**مثال:**
- إيرادات إعلانات = $1000
- نقاط المتنافس أ = 6000
- نقاط المتنافس ب = 4000
- المجموع = 10,000

الحساب:
- المنصة = $200 (20%)
- المتنافس أ = $480 (60% من $800)
- المتنافس ب = $320 (40% من $800)

---

## السيناريو 7: التواصل بين المستخدمين

### طرق التواصل:

#### 1. صندوق الرسائل:
- دردشة خاصة
- من مربع المراسلة
- من ملف المستخدم
- من داخل التعليقات

#### 2. التعليقات:
- عامة على المنافسة
- أثناء البث
- تظهر للجميع
- **تُجمّد** بعد انتهاء البث

#### 3. الإشعارات:
- طلبات انضمام
- قبول/رفض طلب
- بداية منافسة
- رسائل جديدة
- تعليقات على منافساتي

---

## السيناريو 8: الملف الشخصي

### ما يحتويه الملف:

#### المعلومات الشخصية:
- الاسم
- الصورة
- النبذة
- القسم المفضل

#### الإحصائيات:
- عدد المنافسات
- النقاط الإجمالية
- متوسط التقييم

#### الأقسام:
- المنافسات (قادمة، حالية، سابقة)
- الطلبات (مُرسلة، مُستلمة)
- الرسائل
- الإشعارات

#### الحساب المالي:
- الحسابات البنكية المسجلة
- الأرباح المتراكمة
- تاريخ الدفعات
- فواتير وإيصالات
- تتبع الأرباح:
  - من أي إعلان
  - في أي منافسة
  - المبلغ بالتفصيل

#### الإعدادات:
- كلمة المرور
- اللغة
- الإشعارات
- الخصوصية (عام/خاص)
- الإعلانات المحظورة

### إعدادات الخصوصية:
- المستخدم يحدد ما هو معروض للجميع
- ما هو خاص
- تعديل البيانات الشخصية

---

## السيناريو 9: نظام الإعلانات

### من جانب المتنافس:

#### حظر إعلانات معينة:
```
المتنافس يرى إعلان غير مناسب لمبادئه
    ↓
يحظر الإعلان من منافساته
    ↓
الإعلان لا يختفي فوراً
    ↓
يُستبدل بإعلان آخر
```

**قاعدة مهمة:**
- لو طرف وافق وطرف رفض → الإعلان يُحظر
- كلا الطرفين لازم يوافق عشان الإعلان يظهر

### من جانب المعلن:

#### حجز إعلان:
1. التواصل مع الإدارة
2. تحديد الميزانية
3. اختيار الاستهداف
4. الدفع المسبق (لا إعلان بدون دفع)
5. عرض الإعلان

#### الشفافية:
- صفحة عامة تعرض:
  - من أعلن
  - أين ظهر الإعلان
  - النتائج (مشاهدات، نقرات)
  - المبلغ المدفوع

### التحقق من الأرباح:
- المتنافس يقدر يتأكد من:
  - الإعلانات اللي ظهرت في منافساته
  - الإيرادات منها
  - استلامه الفلوس
- **الاستلام متزامن:** المنصة ما بتسلّم الفلوس للمتنافسين إلا لما تستلمها من المعلنين

---

## السيناريو 10: التفاعل مع ملفات الآخرين

### ما يمكن فعله:
- ✅ رؤية الإحصائيات
- ✅ رؤية المنافسات السابقة
- ✅ المراسلة المباشرة
- ✅ المتابعة
- ✅ رؤية التقييمات التي حصل عليها
- ❌ تعديل بياناته (كل واحد يعدل بياناته فقط)

### البحث والفلترة:
- البحث عن مستخدمين بالاسم
- فلترة حسب القسم
- فلترة حسب التقييم
- فلترة حسب عدد المنافسات

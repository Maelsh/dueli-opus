# Ø§Ù„Ø®Ø·Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù„Ù…Ù†ØµØ© Ø¯ÙŠÙˆÙ„ÙŠ
# Complete Plan for Dueli Platform

---

## ğŸ“‹ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© | Overview

Ù…Ù†ØµØ© Ø¯ÙŠÙˆÙ„ÙŠ Ù‡ÙŠ Ù…Ù†ØµØ© Ù…Ù†Ø§ÙØ³Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± ÙˆØ§Ù„Ø­ÙˆØ§Ø±Ø§Øª ÙˆØ§Ù„Ù…ÙˆØ§Ù‡Ø¨. ØªÙ… Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ù†ØµØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…:

- **Backend:** Hono.js (Cloudflare Workers)
- **Database:** D1 (SQLite on Cloudflare)
- **Frontend:** Vanilla JS + Hono JSX (Server-Side Rendering)
- **Auth:** OAuth (Google, Facebook, Microsoft, TikTok) + Email/Password
- **Build:** Vite + TypeScript

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© | Architecture

### Vertical Slice Architecture (VSA)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         main.ts                               â”‚
â”‚                    (Entry Point + Routing)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                 â”‚                 â”‚
            â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   modules/api/   â”‚ â”‚  modules/pages/  â”‚ â”‚     shared/      â”‚
â”‚                  â”‚ â”‚                  â”‚ â”‚                  â”‚
â”‚  â”œâ”€â”€ auth/       â”‚ â”‚  â”œâ”€â”€ about       â”‚ â”‚  â”œâ”€â”€ components/ â”‚
â”‚  â”œâ”€â”€ categories/ â”‚ â”‚  â”œâ”€â”€ verify      â”‚ â”‚  â”‚   â”œâ”€â”€ nav     â”‚
â”‚  â”œâ”€â”€ competitionsâ”‚ â”‚  â”œâ”€â”€ competition â”‚ â”‚  â”‚   â”œâ”€â”€ modal   â”‚
â”‚  â”œâ”€â”€ countries/  â”‚ â”‚  â”œâ”€â”€ create      â”‚ â”‚  â”‚   â””â”€â”€ footer  â”‚
â”‚  â”œâ”€â”€ notificationsâ”‚ â”‚  â”œâ”€â”€ explore     â”‚ â”‚  â”‚               â”‚
â”‚  â””â”€â”€ users/      â”‚ â”‚  â””â”€â”€ static      â”‚ â”‚  â””â”€â”€ templates/  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª | File Structure

```
src/
â”œâ”€â”€ config/types.ts          # Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
â”œâ”€â”€ i18n.ts                  # Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª
â”œâ”€â”€ main.ts                  # Ù†Ù‚Ø·Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
â”‚
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ helpers.ts   # hashPassword, sendEmail
â”‚   â”‚   â”‚   â”œâ”€â”€ routes.ts    # register, login, etc.
â”‚   â”‚   â”‚   â””â”€â”€ oauth-routes.ts
â”‚   â”‚   â”œâ”€â”€ categories/routes.ts
â”‚   â”‚   â”œâ”€â”€ competitions/routes.ts
â”‚   â”‚   â”œâ”€â”€ countries/routes.ts
â”‚   â”‚   â”œâ”€â”€ notifications/routes.ts
â”‚   â”‚   â””â”€â”€ users/routes.ts
â”‚   â”‚
â”‚   â””â”€â”€ pages/
â”‚       â”œâ”€â”€ about-page.ts
â”‚       â”œâ”€â”€ verify-page.ts
â”‚       â”œâ”€â”€ competition-page.ts
â”‚       â”œâ”€â”€ create-page.ts
â”‚       â”œâ”€â”€ explore-page.ts
â”‚       â””â”€â”€ static-pages.ts
â”‚
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ navigation.ts
â”‚   â”‚   â”œâ”€â”€ login-modal.ts
â”‚   â”‚   â””â”€â”€ footer.ts
â”‚   â”‚
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ layout.ts
â”‚
â””â”€â”€ lib/oauth/
    â”œâ”€â”€ google.ts
    â”œâ”€â”€ facebook.ts
    â”œâ”€â”€ microsoft.ts
    â””â”€â”€ tiktok.ts
```

---

## ğŸ”Œ API Endpoints

### Authentication (`/api/auth/`)

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/register` | POST | ØªØ³Ø¬ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ |
| `/login` | POST | ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ |
| `/logout` | POST | ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ |
| `/session` | GET | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ù„Ø³Ø© |
| `/verify` | GET | ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙŠØ¯ |
| `/forgot-password` | POST | Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± |
| `/reset-password` | POST | Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± |
| `/oauth/:provider` | GET | Ø¨Ø¯Ø¡ OAuth |
| `/oauth/:provider/callback` | GET | Ø±Ø¯ OAuth |

### Categories (`/api/categories/`)

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„ÙØ¦Ø§Øª |
| `/:id` | GET | Ø¬Ù„Ø¨ ÙØ¦Ø© Ø¨Ø§Ù„Ù…Ø¹Ø±Ù |
| `/:id/subcategories` | GET | Ø¬Ù„Ø¨ Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ© |

### Competitions (`/api/competitions/`)

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†Ø§ÙØ³Ø§Øª (+ ÙÙ„Ø§ØªØ±) |
| `/` | POST | Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù†Ø§ÙØ³Ø© |
| `/:id` | GET | Ø¬Ù„Ø¨ Ù…Ù†Ø§ÙØ³Ø© ÙˆØ§Ø­Ø¯Ø© |
| `/:id/request` | POST | Ø·Ù„Ø¨ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… |
| `/:id/request` | DELETE | Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø·Ù„Ø¨ |
| `/:id/accept-request` | POST | Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ |
| `/:id/start` | POST | Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø« |
| `/:id/end` | POST | Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ù†Ø§ÙØ³Ø© |
| `/:id/comments` | POST | Ø¥Ø¶Ø§ÙØ© ØªØ¹Ù„ÙŠÙ‚ |
| `/:id/rate` | POST | Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙŠÙŠÙ… |

### Users (`/api/users/`)

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/:username` | GET | Ø¬Ù„Ø¨ Ù…Ù„Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… |
| `/preferences` | PUT | ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª |
| `/:id/follow` | POST | Ù…ØªØ§Ø¨Ø¹Ø© |
| `/:id/follow` | DELETE | Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© |

### Notifications (`/api/notifications/`)

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/` | GET | Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª |
| `/:id/read` | PUT | ØªØ¹Ù„ÙŠÙ… ÙƒÙ…Ù‚Ø±ÙˆØ¡ |
| `/read-all` | PUT | ØªØ¹Ù„ÙŠÙ… Ø§Ù„ÙƒÙ„ |
| `/:id` | DELETE | Ø­Ø°Ù |

---

## ğŸ¨ Pages

| Page | Route | Description |
|------|-------|-------------|
| Home | `/` | Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© |
| About | `/about` | Ø¹Ù† Ø¯ÙŠÙˆÙ„ÙŠ |
| Verify | `/verify` | ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙŠØ¯ |
| Competition | `/competition/:id` | ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†Ø§ÙØ³Ø© |
| Create | `/create` | Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù†Ø§ÙØ³Ø© |
| Explore | `/explore` | Ø§Ø³ØªÙƒØ´Ø§Ù |

---

## ğŸ” Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© | Authentication

### Email/Password
1. Ø§Ù„ØªØ³Ø¬ÙŠÙ„ â†’ Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø±ÙŠØ¯ ØªÙØ¹ÙŠÙ„
2. ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙŠØ¯
3. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
4. Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø© (30 ÙŠÙˆÙ…)

### OAuth
1. Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± OAuth
2. Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø²ÙˆØ¯
3. Ø§Ù„Ø±Ø¯ Ù…Ù† Ø§Ù„Ù…Ø²ÙˆØ¯
4. Ø¥Ù†Ø´Ø§Ø¡/ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
5. Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ù„Ø³Ø©

---

## ğŸŒ Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª | i18n

- Arabic (ar) - Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
- English (en)

ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ØºØ© Ù…Ù†:
1. Query parameter (`?lang=en`)
2. Cookie (`lang=en`)
3. Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ: `ar`

---

## ğŸš€ Ø§Ù„Ù†Ø´Ø± | Deployment

```bash
# Development
npm run dev

# Build
npm run build

# Deploy to Cloudflare
npx wrangler deploy
```

---

## ğŸ“Š Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª | Database

### Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ | Tables

- `users` - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- `sessions` - Ø§Ù„Ø¬Ù„Ø³Ø§Øª
- `categories` - Ø§Ù„ÙØ¦Ø§Øª
- `competitions` - Ø§Ù„Ù…Ù†Ø§ÙØ³Ø§Øª
- `competition_requests` - Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…
- `comments` - Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
- `ratings` - Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
- `notifications` - Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
- `follows` - Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø§Øª
- `countries` - Ø§Ù„Ø¯ÙˆÙ„

---

## âœ… Ø§Ù„Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ù…ØªØ¨Ø¹Ø© | Principles

1. **VSA** - ÙƒÙ„ Ù…ÙŠØ²Ø© ÙÙŠ Ù…Ø¬Ù„Ø¯Ù‡Ø§
2. **SRP** - ÙƒÙ„ Ù…Ù„Ù Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø´ÙŠØ¡ ÙˆØ§Ø­Ø¯
3. **No Zod** - TypeScript types ÙÙ‚Ø·
4. **No ORM** - D1 Ù…Ø¨Ø§Ø´Ø±
5. **Server-Side Rendering** - Hono JSX
6. **Max 500 lines** - Ù„Ø§ Ù…Ù„Ù ÙŠØªØ¬Ø§ÙˆØ² 500 Ø³Ø·Ø±

---

ØªØ§Ø±ÙŠØ® Ø§Ù„Ø®Ø·Ø©: 2025-12-08
